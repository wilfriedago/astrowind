---
---

<script>
	const getScrollPercentage = () => {
		return Math.round((window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100);
	};

	const updateProgressBar = () => {
		const progressBar = document.querySelector('.progress-bar') as HTMLElement;
		const progressSection = document.querySelector('.progress-section') as HTMLElement;
		const sections = document.querySelectorAll('section');

		let scrollPercentage = getScrollPercentage();
		progressBar.style.height = `${scrollPercentage}%`;

		sections.forEach((section, index) => {
			if (window.scrollY >= section.offsetTop - window.innerHeight / 2) {
				progressSection.innerText = `0${index + 1}`;
			}
		});

		requestAnimationFrame(updateProgressBar);
	};

	updateProgressBar();
</script>

<div class="container fixed z-40">
	<div class="fixed left-14 top-1/4 xl:flex flex-col items-center hidden">
		<span class="h-24 w-0.5 bg-gray-500 dark:bg-gray-700"></span>
		<span
			class="progress-section font-bold text-xs text-gray-700 dark:text-white outline-none ring-2 ring-gray-500 dark:ring-gray-700 rounded-full my-8 h-10 w-10 flex items-center justify-center"
		>
		</span>
		<span class="h-24 w-0.5 bg-gray-500 dark:bg-gray-700"></span>
	</div>

	<div class="fixed right-14 top-1/3 h-48 w-0.5 hidden justify-between xl:flex">
		<div class="w-0.5 relative bg-slate-400 dark:bg-gray-700">
			<span class="progress-bar w-0.5 absolute top-0 bg-slate-900 dark:bg-gray-400"></span>
		</div>
	</div>
</div>
