---
import SectionLayout from '~/layouts/SectionLayout.astro';

import { RESUME } from '~/config.mjs';

const { about, skills, services } = RESUME;
---

<script>
	import { initTabs } from '~/utils/helpers';
	initTabs('.trigger', '.tab-area');
	initTabs('.tab', '.tab-content');
</script>

<SectionLayout id="about" title="About Me" description="Learn more about me" hasHeader={true}>
	<div class="mx-auto max-w-5xl flex flex-col sm:flex-row m-10 sm:mt-20">
		<div
			class="flex flex-row sm:flex-col items-start justify-around sm:justify-start w-full sm:w-2/5 p-5 sm:py-10 text-xs font-semibold sm:mx-4 m-0"
		>
			<button
				class="mb-8 cursor-pointer text-gray-500 dark:text-gray-500 hover:text-gray-900 hover:dark:text-gray-50 transition-colors duration-300 ease-in-out trigger"
				data-tab="aboutme"
			>
				<span class="mr-4 sm:inline-flex hidden">/01</span>
				About Me
			</button>
			<button
				class="mb-8 cursor-pointer text-gray-500 dark:text-gray-500 hover:text-gray-900 hover:dark:text-gray-50 transition-colors duration-300 ease-in-out trigger"
				data-tab="skills"
			>
				<span class="mr-4 sm:inline-flex hidden">/02</span>
				My Skills
			</button>
			<button
				class="mb-8 cursor-pointer text-gray-500 dark:text-gray-500 hover:text-gray-900 hover:dark:text-gray-50 transition-colors duration-300 ease-in-out trigger"
				data-tab="services"
			>
				<span class="mr-4 sm:inline-flex hidden">/03</span>
				Services
			</button>
		</div>
		<div class="w-full sm:w-3/5">
			<div class="flex flex-col tab-area" id="aboutme">
				<h3 class="mb-2 text-xl text-center sm:text-start font-semibold">{about.name}</h3>
				<h4 class="mb-8 text-xs text-center sm:text-start font-semibold dark:text-gray-400">{about.profession}</h4>
				{
					about.summary
						.split('\n\n')
						.map((paragraph) => (
							<p
								class="text-sm text-center sm:text-start font-normal -tracking-wide dark:text-gray-400 mb-4"
								set:html={paragraph}
							/>
						))
				}
				{
					about.files.resume ? (
						<a
							href={about.files.resume}
							class="text-sm text-center sm:text-start font-semibold dark:text-gray-400 mb-4"
							target="_blank"
							rel="noopener noreferrer"
						>
							Download Resume
						</a>
					) : null
				}
			</div>
			<div class="flex-col tab-area hidden" id="skills">
				<div class="tabs justify-center">
					{
						skills.map((skillGroup, i) => (
							<button class={`tab tab-bordered ${(i === 0 && 'tab-active') || ''}`} data-tab={skillGroup.name}>
								{skillGroup.title}
							</button>
						))
					}
				</div>
				<div class="p-8">
					{
						skills.map((skillGroup, i) => (
							<ul
								id={skillGroup.name}
								class={`grid grid-cols-3 sm:grid-cols-4 gap-6 sm:gap-4 h-full tab-content ${
									(i !== 0 && 'hidden') || ''
								}`}
							>
								{skillGroup.items.map((skill) => (
									<li class="text-gray-800 dark:text-gray-300 text-sm text-center font-medium">{skill}</li>
								))}
							</ul>
						))
					}
				</div>
			</div>
			<div class="flex-col tab-area hidden" id="services">
				<div class="flex flex-wrap my-4">
					<div class="carousel w-full">
						{
							services.map((service, index) => (
								<div id={`slide-${++index}`} class="carousel-item relative w-full p-4">
									<div class="flex flex-col items-center justify-center h-full">
										<div class="flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800">
											<img src={service.icon} alt="" />
										</div>
										<h3 class="text-gray-800 dark:text-gray-100 text-lg font-semibold mt-4">{service.title}</h3>
										<p class="text-gray-800 dark:text-gray-400 text-sm text-center mt-2">{service.description}</p>
										<div class="absolute flex justify-between transform -translate-y-1/2 left-5 right-5 top-1/2" />
									</div>
								</div>
							))
						}
					</div>
				</div>
			</div>
		</div>
	</div>
</SectionLayout>
